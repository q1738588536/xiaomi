"use strict";$(function(){var a,e;$(".cart .main1 .lg").click(function(){$(location).prop("href","logIn.html")}),$(".cart .main3 .lg").click(function(){$(location).prop("href","mi.html")}),1==localStorage.userflag?(a=function(){function n(){$.each($(".good .numb"),function(e,t){10==t.value?$(this).next().css({cursor:"not-allowed",color:"#d6d6d6"}):$(this).next().css({cursor:"pointer",color:"#845f3f"}),1==t.value?$(this).prev().css({cursor:"not-allowed",color:"#d6d6d6"}):$(this).prev().css({cursor:"pointer",color:"#845f3f"})})}function i(){$.each($(".good .getGoods"),function(e,t){var n=t.parentNode.previousElementSibling.previousElementSibling.firstElementChild.innerHTML,a=t.parentNode.previousElementSibling.firstElementChild.nextElementSibling.value;t.innerHTML=n*a})}function r(){for(var e=$(".cart .sums"),t=0,n=0;n<e.length;n++)e[n].checked&&(t+=+e[n].parentNode.parentNode.lastElementChild.previousElementSibling.previousElementSibling.firstElementChild.nextElementSibling.value);$(".settlement").find("b").eq(0).html(t),0!=$(".settlement b").eq(0).html()?$(".settlement span").eq(2).css({backgroundColor:"#c90214",cursor:"pointer"}):$(".settlement span").eq(2).css({backgroundColor:"#e7e7e7",cursor:"not-allowed"})}n(),$(".good .min").click(function(){var e=+(e=$(this).next().val());--e<1&&(e=1),$(this).next().val(e),n(),i(),r(),l(),t($(this))}),$(".good .max").click(function(){var e=+(e=$(this).prev().val());10<++e&&(e=10),$(this).prev().val(e),n(),i(),r(),l(),t($(this))}),i(),$(".cart .sums").click(function(){for(var e=$(".cart .sums"),t=0;t<e.length;t++)if(!e[t].checked){for(var n=$(".cart .all"),a=0;a<n.length;a++)n[a].checked=!1;c=!0}$(".settlement").find("b").eq(1).html(i),r(),l()});var c=!0;function l(){for(var e=$(".cart .sums"),t=0,n=0;n<e.length;n++)e[n].checked&&(t+=+e[n].parentNode.parentNode.lastElementChild.previousElementSibling.firstElementChild.innerHTML);$(".settlement").find("b").eq(1).html(t)}function t(e){var t=e.parent().parent().find(".img").find("img").attr("alt"),n=e.parent().find("input").val();$.ajax("",{url:"cart1.php",type:"get",data:{alt:t,num:n},success:function(){},error:function(){console.log("失败data")}})}$(".cart .all").click(function(){var e=$(".cart .red");if(c){for(var t=0;t<e.length;t++)e[t].checked=!0;c=!1}else{for(var n=0;n<e.length;n++)e[n].checked=!1;c=!0}r(),l()}),$(".cart .del").find("a").click(function(){var e,t;return $(this).parent().parent().remove(),n(),i(),r(),l(),e=$(this),t=e.parent().parent().find(".img").find("img").attr("alt"),$.ajax("",{url:"cart2.php",type:"get",data:{alt:t},success:function(){console.log(123)},error:function(){console.log("失败data")}}),0==$(".cart .good").length?($(".cart .main2").hide(),$(".cart .main3").show()):($(".cart .main2").show(),$(".cart .main3").hide()),!1})},$(".cart .main1").hide(),$(".cart .main2").hide(),$(".cart .main3").hide(),e=localStorage.user,console.log(e),$.ajax("",{url:"cart.php",type:"get",data:{user:e},success:function(e){!function(e){var t=JSON.parse(e);console.log(t);for(var n=0;n<t.length;n++)$("<div class='good'><div class='check'><input type='checkbox' class='red sums'/></div><div class='img'><img src="+t[n].img+" alt="+t[n].alt+" ></div><div class='txt'><span>"+t[n].name+"</span></div><div class='price'>￥<span>"+t[n].pirce+"</span></div><div class='num'><span class='min'>-</span><input type='text' class='numb' value="+t[n].num+" /><span class='max'>+</span></div><div class='sum'>￥<span class='getGoods'>899</span></div><div class='del'><a href='#'></a></div></div>").appendTo($(".cart .main2 .goods"));a(),0==$(".cart .good").length?($(".cart .main2").hide(),$(".cart .main3").show()):($(".cart .main2").show(),$(".cart .main3").hide())}(e)},error:function(){console.log("失败")}})):($(".cart .main1").show(),$(".cart .main2").hide(),$(".cart .main3").hide())});